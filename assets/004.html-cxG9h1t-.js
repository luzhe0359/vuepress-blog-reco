import{_ as e,r as p,o,c,a,b as n,d as t,e as l}from"./app-wc4Qvs9_.js";const i={},u=l(`<blockquote><p>ios 真机调试遇到的图片问题汇总。图片不显示(已解决)，base64 图片过大导致页面卡住(未完美解决)。有没有大佬遇到类似问题的，救救我！😭😭</p></blockquote><p>最近在用 vue 开发企业微信移动端项目，真机调试时，安卓、鸿蒙系统显示正常，苹果系统遇到点小问题。如下：</p><h2 id="一、图片不显示" tabindex="-1"><a class="header-anchor" href="#一、图片不显示" aria-hidden="true">#</a> 一、图片不显示</h2><h3 id="_1-问题描述" tabindex="-1"><a class="header-anchor" href="#_1-问题描述" aria-hidden="true">#</a> 1. 问题描述</h3><p>用<code>vant</code>框架做<strong>下拉刷新</strong>功能，使用<strong>自定义提示</strong>，拷贝官网 demo 到项目中，代码如下：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-pull-refresh</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:head-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>80<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@refresh</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onRefresh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 下拉提示，通过 scale 实现一个缩放效果 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#pulling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doge<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/doge.png<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ transform: \`scale(\${props.distance / 80})\` }<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 释放提示 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#loosing</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doge<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/doge.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 加载提示 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#loading</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doge<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/doge-fire.jpg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>刷新次数: {{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-pull-refresh</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.doge</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 140px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 72px<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PS: 真实项目中仅修改了图片路径。 部署到测试环境，安卓、鸿蒙、windows 正常显示，但 ios、mac 不显示。</p><h3 id="_2-真机调试" tabindex="-1"><a class="header-anchor" href="#_2-真机调试" aria-hidden="true">#</a> 2. 真机调试</h3><p>使用 mac 在企业微信客户端通过调试发现，图片 dom 存在，但查找元素时，页面中找不到。</p><h3 id="_3-解决办法" tabindex="-1"><a class="header-anchor" href="#_3-解决办法" aria-hidden="true">#</a> 3. 解决办法</h3><p>解决办法有两种：</p><ul><li>背景图 在图片位置放置一个 div 并设置好宽高，将其设置背景图片(背景图宽高设置为 100%)</li><li>img 标签 在图片位置放置一个 div 并设置好宽高，在其内部添加 img 标签(宽高设置为 100%) 也可以直接使用<code>vant</code>自带的<code>van-image</code>组件，最终会解析如上格式</li></ul><h2 id="二、base64-导致页面卡崩" tabindex="-1"><a class="header-anchor" href="#二、base64-导致页面卡崩" aria-hidden="true">#</a> 二、base64 导致页面卡崩</h2><h3 id="_1-问题描述-1" tabindex="-1"><a class="header-anchor" href="#_1-问题描述-1" aria-hidden="true">#</a> 1. 问题描述</h3><p>因为内网开发的限制，需要将图片处理为 base64，才可以在外网展示。 ios/mac 切换到图片较多的页面时，会出现卡崩的情况。其实也没有崩，得等个十来分钟才可以操作界面。(站在用户角度：和卡崩没什么区别 💀💀)</p><h3 id="_2-真机调试-1" tabindex="-1"><a class="header-anchor" href="#_2-真机调试-1" aria-hidden="true">#</a> 2. 真机调试</h3><p>在企业微信客户端通过调试发现，图片转换为 base64 后，体积较大，导致界面卡崩。</p><h3 id="_3-解决办法-1" tabindex="-1"><a class="header-anchor" href="#_3-解决办法-1" aria-hidden="true">#</a> 3. 解决办法</h3><ul><li>后端将图片压缩处理不超过 200k</li></ul><h3 id="_4-新的问题" tabindex="-1"><a class="header-anchor" href="#_4-新的问题" aria-hidden="true">#</a> 4. 新的问题</h3><ul><li>体积较大的图片，压缩后模糊、不清晰</li><li>gif 图片压缩到一定比例后，成为了静态图 😅🤣😂</li></ul><p>虽然仍存在一系列新问题，但这也比页面卡住卡崩强一万倍，负责人默默地接受了这个结果。</p><h2 id="三、总结" tabindex="-1"><a class="header-anchor" href="#三、总结" aria-hidden="true">#</a> 三、总结</h2><p>以上是我能够想到的一些解决办法。 base64 问题，各位大佬如有更好的办法，欢迎留言支招。万分感谢！！ 🙏🙏🙏</p>`,24),r={href:"https://zugelu.com/",target:"_blank",rel:"noopener noreferrer"},d={href:"https://juejin.cn/user/1151943917971031",target:"_blank",rel:"noopener noreferrer"},k={href:"https://blog.csdn.net/weixin_44388523",target:"_blank",rel:"noopener noreferrer"},g=a("strong",null,"关注足各路、前端不迷路！",-1);function h(v,m){const s=p("ExternalLinkIcon");return o(),c("div",null,[u,a("p",null,[n("本文首发于"),a("a",r,[n("足各路的博客"),t(s)]),n("，后续会同步更新到"),a("a",d,[n("掘金"),t(s)]),n("、"),a("a",k,[n("CSDN"),t(s)]),n("。"),g])])}const _=e(i,[["render",h],["__file","004.html.vue"]]);export{_ as default};
